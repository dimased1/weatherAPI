# Weather Forecast API

Этот API предоставляет дружелюбный и легко читаемый прогноз погоды для города **Эдинбург** на основе данных WeatherAPI и генерации текста с помощью DeepSeek. Прогноз доступен на русском и английском языках.

## Особенности

* Получение прогноза на **сегодня** с часовыми данными.
* Прогноз формируется в виде **дружелюбного текста**, включающего:

  * Дату и день недели.
  * Приветствие в зависимости от времени суток.
  * Краткий обзор температуры, осадков, ветра и других особенностей.
  * Рекомендации по одежде.
  * Упоминание возможных изменений погоды в течение дня.
* Поддержка двух языков: **ru** (русский) и **eng** (английский).

## Требования

* Node.js v18+
* API ключи:

  * `WEATHER_KEY` для WeatherAPI.
  * `DEEPSEEK_API_KEY` для DeepSeek.

## Установка

1. Склонировать репозиторий или добавить файл `/api/weather.js` в ваш проект Next.js.
2. Установить зависимости:

```bash
npm install node-fetch
```

3. Добавить в `.env` файл ключи API:

```env
WEATHER_KEY=ваш_ключ_WeatherAPI
DEEPSEEK_API_KEY=ваш_ключ_DeepSeek
```

## Использование

### Запрос

HTTP GET к эндпоинту:

```
/api/weather?lang=ru
/api/weather?lang=eng
```

* `lang` — язык прогноза. По умолчанию `ru`.
* Поддерживаемые значения: `ru`, `eng`.

### Пример ответа

```json
{
  "forecast": "Доброе утро! Сегодня в Эдинбурге ожидается прохладная погода с температурой около 10°C. Возможен лёгкий дождь после обеда. Ветер северо-западный, 15 км/ч. Рекомендуется надеть лёгкую куртку и взять зонт. Вечером температура может немного снизиться, так что теплая одежда будет кстати."
}
```

## Ошибки

* `500` — проблемы с API ключами или внутренние ошибки.
* `400` — неподдерживаемый язык (`lang`).

## Структура кода

* `fetchWeatherData(apiKey)` — получает данные о погоде с WeatherAPI.
* `generateForecast(apiKey, weatherData, language)` — генерирует текст прогноза через DeepSeek.
* `PROMPTS` — шаблоны подсказок для генерации прогноза на разных языках.

## Лицензия

MIT
